import{d as K,c as f,r as v,o as Q,m as W,b as s,e as r,f as n,p as Y,i as X,t as m,h,q as Z,s as ee,k as te,a as j}from"./index-B2AXNT53.js";const oe={class:"max-w-4xl mx-auto px-4 py-12 relative"},ne={class:"mb-8"},ae={key:0,class:"text-center py-16 min-h-screen bg-white grid place-content-center fixed top-0 left-0 w-full"},le={key:1,class:"text-center py-16 text-red-600"},se={class:"text-sm text-gray-500 mt-2"},re={key:2},ie={class:"mb-8"},ce={key:0,class:"text-sm text-gray-500 uppercase tracking-wider mb-3"},ge={key:0},ue={key:1},de={class:"text-4xl font-light mb-6"},pe={key:1,class:"flex items-center"},me={class:"text-sm"},he={key:0,class:"mb-10"},ve=["src","alt"],be=["innerHTML"],fe={key:2,class:"mb-12 text-gray-500"},we={class:"border-t border-b border-gray-200 py-6 mb-12"},ye={class:"flex justify-between items-center"},_e={class:"flex space-x-4"},xe=["href"],Ce=["href"],ke=["href"],Me={key:3,class:"text-center py-16 text-gray-500"},Be=`
    query GetBlogBySlug($slug: ID!) {
        post(id: $slug, idType: SLUG) {
            title
            slug
            ... on WithAcfBlog {
                blog {
                    blogContent {
                        thumbnail {
                            node {
                                sourceUrl
                                altText
                                id
                            }
                        }
                        title
                        teaser
                        publishedDate
                        author
                        category
                        content
                    }
                    isFeatured
                }
            }
        }
    }
`,Ae=K({__name:"ViewPage",setup(Te){const V=Z(),H=ee(),w=f(()=>V.params.slug),e=v(null),d=v(!0),i=v(null),p=f(()=>typeof window>"u"?"":window.location.href),b=f(()=>typeof window>"u"?"https://alphatalentmanagement.com":window.location.origin),O=o=>{const t={year:"numeric",month:"long",day:"numeric"};return new Date(o).toLocaleDateString("en-US",t)},y=async o=>{var c,u;if(!o){i.value=new Error("Blog slug is missing or invalid."),d.value=!1,e.value=null;return}d.value=!0,i.value=null;const t=`blogData_${o}`;try{const a=localStorage.getItem(t);a&&(e.value=JSON.parse(a),d.value=!1,console.log(`Loaded blog post ${o} from cache.`),_())}catch(a){console.error(`Failed to parse cached blog data for ${o}:`,a),localStorage.removeItem(t)}try{const a=await te.post("https://admin.alphatalentmanagement.com/graphql",{query:Be,variables:{slug:o}}),l=(c=a.data.data)==null?void 0:c.post;if((u=l==null?void 0:l.blog)!=null&&u.blogContent){e.value=l;try{localStorage.setItem(t,JSON.stringify(l))}catch(g){console.error(`Failed to cache blog data for ${o}:`,g)}i.value=null,_()}else l?(console.warn("Post found, but missing ACF blog data:",l),i.value=new Error("Post data is incomplete."),e.value||(d.value=!1)):(console.warn("Post not found:",a.data),i.value=new Error("Post not found."),e.value||(d.value=!1));a.data.errors&&(console.error("GraphQL errors:",a.data.errors),i.value||(i.value=new Error(a.data.errors.map(g=>g.message).join(", "))))}catch(a){console.error(`Error fetching blog post ${o}:`,a),i.value=a}finally{d.value=!1}},_=()=>{var a,l,g;if(!e.value){j({title:"Blog Post - Alpha Talent Management",meta:[{name:"description",content:"Read articles and news from Alpha Talent Management."},{property:"og:title",content:"Alpha Talent Management Blog"},{property:"og:description",content:"Read articles and news from Alpha Talent Management."},{property:"og:type",content:"website"},{property:"og:url",content:p.value},{property:"og:image",content:`${b.value}/images/AATM_logo.png`},{name:"twitter:card",content:"summary"},{name:"twitter:title",content:"Alpha Talent Management Blog"},{name:"twitter:description",content:"Read articles and news from Alpha Talent Management."},{name:"twitter:image",content:`${b.value}/images/AATM_logo.png`}],link:[{rel:"canonical",href:p.value}]}),console.log("Set default meta tags");return}const o=(a=e.value.blog)==null?void 0:a.blogContent;if(!o){console.warn("Post loaded but blogContent missing");return}const t=`${o.title||e.value.title} - Alpha Talent Management Blog`,c=o.teaser?o.teaser.substring(0,160)+(o.teaser.length>160?"...":""):o.content?o.content.replace(/<[^>]*>?/gm,"").substring(0,160)+"...":`Read the article "${o.title||e.value.title}" on the Alpha Talent Management blog.`,u=((g=(l=o.thumbnail)==null?void 0:l.node)==null?void 0:g.sourceUrl)||`${b.value}/images/AATM_logo.png`;console.log("Updating meta tags for:",t),j({title:t,meta:[{name:"description",content:c},{property:"og:title",content:t},{property:"og:description",content:c},{property:"og:type",content:"article"},{property:"og:url",content:p.value},{property:"og:image",content:u},{property:"article:published_time",content:o.publishedDate||""},{property:"article:author",content:o.author||""},{name:"twitter:card",content:"summary_large_image"},{name:"twitter:title",content:t},{name:"twitter:description",content:c},{name:"twitter:image",content:u}],link:[{rel:"canonical",href:p.value}]}),console.log("Meta tags updated successfully")};Q(()=>{y(w.value)}),W(w,o=>{y(o)}),v({name:"",email:"",comment:""});const J=()=>{H.go(-1)};return(o,t)=>{var c,u,a,l,g,x,C,k,M,B,T,$,A,U,R,D,I,L,P,E,G,S,z,q,F,N;return s(),r("div",oe,[n("div",ne,[n("a",{href:"#",onClick:Y(J,["prevent"]),class:"inline-flex items-center text-gray-600 hover:text-black transition-colors"},t[0]||(t[0]=[n("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),X(" Go Back ")]))]),d.value?(s(),r("div",ae,t[1]||(t[1]=[n("p",null,"Loading post...",-1)]))):i.value?(s(),r("div",le,[t[2]||(t[2]=n("p",null,"Failed to load post. It might not exist or there was a network issue.",-1)),n("p",se,m(i.value.message),1)])):e.value?(s(),r("div",re,[n("div",ie,[(u=(c=e.value.blog)==null?void 0:c.blogContent)!=null&&u.publishedDate||(l=(a=e.value.blog)==null?void 0:a.blogContent)!=null&&l.category?(s(),r("div",ce,[(x=(g=e.value.blog)==null?void 0:g.blogContent)!=null&&x.publishedDate?(s(),r("span",ge,m(O(e.value.blog.blogContent.publishedDate)),1)):h("",!0),(k=(C=e.value.blog)==null?void 0:C.blogContent)!=null&&k.category?(s(),r("span",ue," â€¢ "+m(e.value.blog.blogContent.category),1)):h("",!0)])):h("",!0),n("h1",de,m(((B=(M=e.value.blog)==null?void 0:M.blogContent)==null?void 0:B.title)||e.value.title),1),($=(T=e.value.blog)==null?void 0:T.blogContent)!=null&&$.author?(s(),r("div",pe,[n("span",me,"By "+m(e.value.blog.blogContent.author),1)])):h("",!0)]),(D=(R=(U=(A=e.value.blog)==null?void 0:A.blogContent)==null?void 0:U.thumbnail)==null?void 0:R.node)!=null&&D.sourceUrl?(s(),r("div",he,[n("img",{src:e.value.blog.blogContent.thumbnail.node.sourceUrl,alt:((L=(I=e.value.blog.blogContent.thumbnail)==null?void 0:I.node)==null?void 0:L.altText)||e.value.blog.blogContent.title||e.value.title,class:"w-full h-auto object-cover"},null,8,ve)])):h("",!0),(E=(P=e.value.blog)==null?void 0:P.blogContent)!=null&&E.content?(s(),r("div",{key:1,class:"prose prose-lg max-w-none mb-12 wysiwyg",innerHTML:e.value.blog.blogContent.content},null,8,be)):(s(),r("div",fe,"Content is not available for this post.")),n("div",we,[n("div",ye,[t[6]||(t[6]=n("div",{class:"text-sm text-gray-700"},"Share this article",-1)),n("div",_e,[n("a",{href:`https://twitter.com/intent/tweet?url=${encodeURIComponent(p.value)}&text=${encodeURIComponent(((S=(G=e.value.blog)==null?void 0:G.blogContent)==null?void 0:S.title)||e.value.title||"Check out this post")}`,target:"_blank",rel:"noopener noreferrer",class:"text-gray-500 hover:text-blue-600 transition-colors"},t[3]||(t[3]=[n("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 24 24"},[n("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})],-1)]),8,xe),n("a",{href:`https://www.linkedin.com/shareArticle?mini=true&url=${encodeURIComponent(p.value)}&title=${encodeURIComponent(((q=(z=e.value.blog)==null?void 0:z.blogContent)==null?void 0:q.title)||e.value.title||"Check out this post")}`,target:"_blank",rel:"noopener noreferrer",class:"text-gray-500 hover:text-blue-800 transition-colors"},t[4]||(t[4]=[n("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 24 24"},[n("path",{d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"})],-1)]),8,Ce),n("a",{href:`https://pinterest.com/pin/create/button/?url=${encodeURIComponent(p.value)}&description=${encodeURIComponent(((N=(F=e.value.blog)==null?void 0:F.blogContent)==null?void 0:N.title)||e.value.title||"Check out this post")}`,target:"_blank",rel:"noopener noreferrer",class:"text-gray-500 hover:text-red-600 transition-colors"},t[5]||(t[5]=[n("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 24 24"},[n("path",{d:"M12 0c-6.627 0-12 5.372-12 12 0 5.084 3.163 9.426 7.627 11.174-.105-.949-.2-2.405.042-3.441.218-.937 1.407-5.965 1.407-5.965s-.359-.719-.359-1.782c0-1.668.967-2.914 2.171-2.914 1.023 0 1.518.769 1.518 1.69 0 1.029-.655 2.568-.994 3.995-.283 1.194.599 2.169 1.777 2.169 2.133 0 3.772-2.249 3.772-5.495 0-2.873-2.064-4.882-5.012-4.882-3.414 0-5.418 2.561-5.418 5.207 0 1.031.397 2.138.893 2.738.098.119.112.224.083.345l-.333 1.36c-.053.22-.174.267-.402.161-1.499-.698-2.436-2.889-2.436-4.649 0-3.785 2.75-7.262 7.929-7.262 4.163 0 7.398 2.967 7.398 6.931 0 4.136-2.607 7.464-6.227 7.464-1.216 0-2.359-.631-2.75-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146 1.124.347 2.317.535 3.554.535 6.627 0 12-5.373 12-12 0-6.628-5.373-12-12-12z"})],-1)]),8,ke)])])])])):(s(),r("div",Me," The requested blog post could not be found. "))])}}});export{Ae as default};
